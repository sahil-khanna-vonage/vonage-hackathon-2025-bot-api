[ {
  "role" : "system",
  "content" : "You are a backend assistant. When I ask a natural language question, return a JSON object with two keys:\n\n1. `query`: the SQL query.\n2. `nl`: a natural language sentence suitable for displaying the query result to a user. It should be short, user-friendly, and assume the result is being shown right after this sentence. Do NOT explain what the query does.\n\nExamples:\n\nInput: How many calls were handled today?\nOutput: {\"query\": \"SELECT COUNT(*) FROM call_logs WHERE DATE(start_time) = CURRENT_DATE;\", \"nl\": \"The total number of calls handled today is %s.\"}\n\nInput: Which agents are on break?\nOutput: {\"query\": \"SELECT agent_name FROM agent_status WHERE status = 'Break';\", \"nl\": \"The agents currently on break are listed below.\"}\n\nDo not include extra text. Just return the JSON.\n\nBelow is the DB schema for your reference\n\nCREATE TABLE agent_status (\n\tagent_id INT PRIMARY KEY,\n\tagent_name VARCHAR(100),\n\tstatus VARCHAR(20),\n\tlogged_in_at TIMESTAMP,\n\ton_break_since TIMESTAMP\n);\n\nCOMMENT ON COLUMN agent_status.status IS 'Allowed values are \"On Call\", \"Available\" and \"Break\"';\n\nCREATE TABLE agent_performance (\n\tagent_id INT PRIMARY KEY,\n\tcalls_handled INT,\n\taht FLOAT,\n\tbreak_time FLOAT,\n\tcsat FLOAT,\n\tlogin_duration FLOAT\n);\n\nCREATE TABLE queue_status (\n\tqueue_name VARCHAR(50) PRIMARY KEY,\n\twaiting_calls INT,\n\taverage_wait INT,\n\tlongest_wait INT,\n\tsla_met FLOAT\n);\n\nCREATE TABLE call_logs (\n\tcall_id UUID PRIMARY KEY,\n\tagent_id INT,\n\tqueue VARCHAR(50),\n\tstart_time TIMESTAMP,\n\tend_time TIMESTAMP,\n\tduration INT,\n\ttype VARCHAR(20),\n\tstatus VARCHAR(20)\n);\n\nCOMMENT ON COLUMN call_logs.type IS 'Allowed values are \"inbound\" and \"outbound\"';\nCOMMENT ON COLUMN call_logs.status IS 'Allowed values are \"completed\", \"dropped\", \"queued\" and \"on going\")';"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name FROM agent_status WHERE status = 'Break';\", \"nl\": \"The agents currently on break are listed below.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(DISTINCT agent_id) FROM agent_status WHERE status = 'Break';\", \"nl\": \"There are %s agents on break.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(agent_name) FROM agent_status WHERE status = 'Break';\", \"nl\": \"There is %s agent on break.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(DISTINCT agent_id) FROM agent_status WHERE status = 'Break';\", \"nl\": \"There are %s agents on break.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(agent_name) FROM agent_status WHERE status = 'Break';\", \"nl\": \"One agent is on break.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(*) FROM agent_status WHERE status = 'Break';\", \"nl\": \"There are %s agent(s) on break.\"}"
}, {
  "role" : "user",
  "content" : "Top 3 agent names"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name FROM agent_status ORDER BY status = 'Break' LIMIT 3;\", \"nl\": \"The top 3 agents on break are listed below.\"}"
}, {
  "role" : "user",
  "content" : "How many calls handled today?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(*) FROM call_logs WHERE DATE(start_time) = CURRENT_DATE;\", \"nl\": \"The total number of calls handled today is %s.\"}"
}, {
  "role" : "user",
  "content" : "Best performer"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name, calls_handled, aht FROM agent_performance ORDER BY calls_handled DESC LIMIT 1;\", \"nl\": \"The top performing agent is %s with the highest call handling record.\"}"
}, {
  "role" : "user",
  "content" : "Who took most calls>"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_id, COUNT(*) FROM call_logs WHERE DATE(start_time) = CURRENT_DATE GROUP BY agent_id ORDER BY COUNT(*) DESC LIMIT 1;\", \"nl\": \"%s handled the most calls today.\"}"
}, {
  "role" : "user",
  "content" : "Who took most calls?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name FROM call_performance ORDER BY total_calls DESC LIMIT 1;\", \"nl\": \"The agent who handled the most calls is %s.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are available to take calls?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(DISTINCT agent_id) FROM agent_status WHERE status = 'Available';\", \"nl\": \"There are %s agents available to take calls.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are on break?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(*) FROM agent_status WHERE status = 'Break';\", \"nl\": \"There is %s agent on break.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are handling calls?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(DISTINCT agent_id) FROM call_logs WHERE status = 'in progress';\", \"nl\": \"There are %s agents currently handling calls.\"}"
}, {
  "role" : "user",
  "content" : "How many agents are available?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT COUNT(*) FROM agent_status WHERE status IN ('Available', 'On Call');\", \"nl\": \"There are %s agents available to take calls.\"}"
}, {
  "role" : "user",
  "content" : "Names of them please?"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name FROM agent_status WHERE status IN ('Available', 'On Call') GROUP BY agent_name;\", \"nl\": \"The following agents are available to take calls: %s.\"}"
}, {
  "role" : "user",
  "content" : "Agent Names"
}, {
  "role" : "assistant",
  "content" : "{\"query\": \"SELECT agent_name FROM agent_status WHERE status IN ('Available', 'On Call');\", \"nl\": \"%s are available to take calls.\"}"
} ]